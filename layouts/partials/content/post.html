{{- $post := . -}}
{{- $posttype := $post.Type | default "default" -}}
{{- $config := partialCached "func/getPostSetup.html" $posttype $posttype -}}

{{- $articleclasses := partials.IncludeCached "func/getArticleClasses.html" $post $post -}}
<article class="{{- $articleclasses -}}">

  {{- /* MARK: Status
  */ -}}
  {{- if ne $config.status false -}}
    {{- partials.IncludeCached "content/components/status.html" $post $post -}}
  {{- end -}}

  {{- /* MARK: Banner
  */ -}}
  {{- if ne $config.banner false -}}
    {{- partials.Include "content/components/banner.html" $post -}}
  {{- end -}}

  {{- /* MARK: Video banner
  */ -}}
  {{- if ne $config.videobanner false -}}
    {{- partials.Include "content/components/banner-video.html" $post -}}
  {{- end -}}

  <div class="article-content">

    {{- /* MARK: Headline
    */ -}}
    {{- if ne $config.headline false -}}
      {{- $level := 2 -}}
      {{- if $post.IsPage -}}
        {{- $level = 1 -}}
      {{- end -}}
      {{- $options := dict "post" $post "level" $level -}}
      {{- partials.Include "content/components/headline.html" $options -}}
    {{- end -}}

    {{- /* MARK: Headline-banner
    */ -}}
    {{- if ne $config.bannerheadline false -}}
      {{- partials.Include "content/components/headline-banner.html" $post -}}
    {{- end -}}

    <div class="prose">
      {{- /* MARK: Content
      */ -}}
      {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-before" "context" $post ) -}}
      {{- $options := dict "type" $posttype "post" $post "is_preview" false -}}
      {{- partials.Include "content/components/content.html" $options $options -}}
      {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-after" "context" $post ) -}}

      {{- /* MARK: Comments
      */ -}}
      <div class="section--comments">
        {{- partials.IncludeCached "content/components/comment-form.html" $post $post -}}
      </div>

      {{- /* MARK: Meta
      */ -}}
      {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-meta-before" "context" $post ) -}}
      {{- if ne $config.meta false -}}
        {{ partial "content/components/meta.html" $post -}}
      {{- end -}}
      {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-meta-after" "context" $post ) -}}

      {{- /* MARK: Related Posts
      */ -}}
      {{- if ne $config.related false -}}
        {{- partials.IncludeCached "content/sections/related.html" $post $post.Params.tags -}}
      {{- end -}}

    </div>
  </div>
</article>
