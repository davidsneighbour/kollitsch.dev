---
// @todo refactor and comment
/**
 * TagList component
 * - Renders a flat inline list of tags with optional counts
 * - `tags` is an array of TagListItem (id, label, count, url)
 */
import type { TagListItem } from "@utils/tags.ts";

export interface Props {
  tags: TagListItem[];
  showCounts?: boolean;
  filterId?: string;
}

// Props expected from your existing component/usage
const { tags, showCounts = true, filterId = "default" } = Astro.props;
---

<div
  class="mt-2 flex flex-wrap justify-between justify-items-stretch"
  data-tag-filter-list
  data-tag-filter-id={filterId}
>
  {
    tags.length === 0 ? (
      <span>(none)</span>
    ) : (
      tags.map((tag) => {
        const labelText = showCounts ? `${tag.label} (${tag.count})` : tag.label;
        // Lowercase once at render time (avoid locale edge cases in runtime code).
        const labelLower = String(tag.label).toLowerCase();

        return (
          <a
            class="
              inline-flex items-center
              m-1 px-2 py-1
              rounded-md
              dark:bg-red-400/10 dark:text-red-400/90
              bg-red-400/5 text-red-400
              dark:hover:bg-red-400/20 dark:hover:text-red-400
              hover:bg-red-400/20 hover:text-red-400
              inset-ring inset-ring-red-400/20"
            href={tag.url}
            data-label={labelLower}
          >
            {labelText}
          </a>
        );
      })
    )
  }
</div>
