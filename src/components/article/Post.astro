---
// @todo refactor and comment
// create a single blog post with full content

import type { CollectionEntry } from "astro:content";

import BreadCrumbs from "@components/content/BreadCrumbs.astro";
import Giscus from "@components/Giscus.astro";
import Heading from "@components/Heading.astro";
import PaginationSingle from "@components/PaginationSingle.astro";
import PostImage from "@components/PostImage.astro";
import Meta from "@components/PostMeta.astro";
import Prose from "@components/Prose.astro";
import ShareSeparator from "@components/ShareSeparator.astro";
import SchemaBlogPost from "@components/schema/BlogPosting.astro";
import Komut from "@components/Komut.astro";

export interface Props {
  post: CollectionEntry<"blog">;
}

const { post }: Props = Astro.props;
---

<article
  transition:animate="slide"
  class="@container mt-8 rounded-(--card-radius) bg-zinc-100 p-(--card-padding) ring-1 ring-gray-900/10 [--card-padding:--spacing(1)] [--card-radius:var(--radius-2xl)] ring-inset hover:bg-zinc-100/90 dark:bg-zinc-900 dark:ring-gray-100/10 dark:hover:bg-zinc-900/90"
>
  <PostImage
    post={post}
    link={`/blog/${post.id}/`}
    classes="max-w-full aspect-2/1 object-cover rounded-t-[calc(var(--card-radius)-var(--card-padding))]"
  />

  <div class="@sm:p-2 @md:p-3 @lg:p-4">
    <Heading level={1} class="heading" link={`/blog/${post.id}/`} html={post.data.title} />
    <BreadCrumbs path={post.filePath ?? ""} />
    <Prose post={post} />
    <Komut class="text-gray-600 inline-block align-middle" />
    <ShareSeparator title={post.data.title} description={post.data.description} />
    <PaginationSingle post={post} />
    <Giscus post={post} />
    <Meta post={post} />
  </div>
  <SchemaBlogPost post={post} />
</article>
