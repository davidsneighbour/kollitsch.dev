{{- $page := $.Page -}}
{{- $fm := .Get "fm" | default false -}}
{{- $type := .Get "type" | default "config" -}}
{{- $langs := slice "toml" "yaml" "json" -}}
{{- $delimiters := dict
			"toml" "+++"
			"yaml" "---"
-}}
{{- $slug := printf "c%s" (partial "func/getRandomString" (dict "limit" 8)) -}}

{{- $placeHolder := "#-hugo-placeholder-#" -}}

<ul class="nav nav-tabs" role="tablist">
	{{- range $langs -}}
		<li class="nav-item" role="presentation">
			<button class="nav-link {{ if eq . "toml" }}active{{ end }}" id="{{- $slug -}}-{{- . -}}-tab" data-bs-toggle="tab" data-bs-target="#{{- $slug -}}-{{- . -}}" type="button" role="tab" aria-controls="{{- $slug -}}-{{- . -}}" aria-selected="true">{{- . | upper -}}</button>
		</li>
	{{- end -}}
  <li class="nav-item">
    <a class="nav-link disabled">(click to select format)</a>
  </li>
</ul>
<div class="tab-content">{{- range $langs -}}
  <div class="tab-pane {{ if eq . "toml" }}active{{ end }}" id="{{- $slug -}}-{{- . -}}" role="tabpanel" aria-labelledby="{{- $slug -}}-{{- . -}}-tab" tabindex="0">
		{{- $hCode := $.Inner | transform.Remarshal . -}}
		{{- if and $fm (in (slice "toml" "yaml") .) -}}
			{{- $hCode = printf "%s\n%s\n%s" $placeHolder $hCode $placeHolder -}}
		{{- end -}}
		{{- $hCode = $hCode | replaceRE `\n+` "\n" }}
		{{ highlight $hCode . "" | replaceRE $placeHolder (index $delimiters .) | safeHTML }}
</div>
{{- end -}}</div>
