---
// @todo refactor

import { getHomepagePosts } from '@utils/getHomepagePosts';

import Layout from '@layouts/DefaultPage.astro';

import ArticleCard from '@components/ArticleCard.astro';
import Heading from '@components/Heading.astro';

const { featuredPost, recentPosts } = await getHomepagePosts();

const post = {
  data: {
    title: 'Home | My Personal Website',
    description: 'Welcome to my personal website. Explore my latest articles and featured content.',
  },
};
---

<Layout post={post}>
  <section id="featured">
    <Heading level={2} title="Featured" class="something"/>
    <ArticleCard post={featuredPost!} />
  </section>
  <section id="recent">
    <Heading level={3} title="Recent Posts"/>
    <div class="mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-3">
      {recentPosts.map(post => (
        <ArticleCard post={post} />
      ))}
    </div>
  </section>
</Layout>
