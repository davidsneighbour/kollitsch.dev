{{- define "main" -}}
  {{- if compare.Lt (.Scratch.Get "paginator").PageNumber 2 -}}
    <section class="section--sitetitle">
      <div class="container">
        <div class="site-title ff-headline">
          <a href="{{- site.BaseURL -}}">{{- site.Title -}}</a>
        </div>
        {{- partial "func/hook.html" ( collections.Dictionary "hook" "post-sitetitle" "context" . ) -}}
			</div>
    </section>
  {{- end -}}
  <section class="section--content">
    <div class="container">
      {{- $paginator := .Scratch.Get "paginator" -}}
      {{- $counter := 0 -}}
      {{- $homePosts := collections.First 8 $paginator.Pages -}}
      <div class="row">
        {{- $mainsectionlink := fmt.Printf "%s%s/" "/" site.Params.mainSection -}}
        {{- range $index, $item := $homePosts -}}
          {{ if not .IsHome }}{{/* a quick hack to leave the home page itself out of the loop */}}
            {{ $class := "col-md-6" }}
            {{ if compare.Eq $counter 0 }}
              <div class="col-12 snap-align-start mb-5 snap-y">
                {{- partials.Include "content/post.html" $item -}}
              </div>
            {{ else }}
              {{ if compare.Eq $counter 1 }}
                <h2 class="text-center text-primary m-5">
                  <a href="{{- $mainsectionlink -}}">
                    {{- lang.Translate "theme.recentposts" -}}
                  </a>
                </h2>
              {{ end }}
              <div class="col-12 col-md-4 snap-align-start mb-5 snap-y">
                {{- $post := collections.Dictionary "context" $item "level" "3" "index" $counter -}}
                {{- partials.Include "content/post-preview.html" $post -}}
              </div>
            {{ end }}
            {{- $counter = math.Add $counter 1 -}}
          {{ end }}
        {{- end -}}
      </div>
      <div class="row">
        <div class="col text-center">
          <a href="{{- $mainsectionlink -}}" class="btn btn-outline-primary btn-lg">
            {{- lang.Translate "theme.readall" -}}
          </a>
        </div>
      </div>
    </div>
  </section>
{{- end -}}
