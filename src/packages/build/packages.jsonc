{
  // a collection of scripts to build the package.json file
  // requires Node24+
  "devDependencies": {
    "fixpack": "4.0.0"
  },
  "scripts": {
    "packages:generate": "wireit",
    "packages:update": "wireit"
  },
  "wireit": {
    "packages:generate": {
      "dependencies": [
        "compile:package"
      ],
      "command": "node ./src/packages/generate-package.ts",
      "files": [
        "./src/packages/**/*.jsonc"
      ]
    },
    "packages:update": {
      "dependencies": [
        "compile:fixpack"
      ],
      "command": "node ./src/packages/update-package.ts"
    },
    // fixpack returns a non-zero exit code if changes were made but the script did not fail,
    // so we run it twice and ignore errors
    "compile:fixpack": {
      "command": "fixpack --config ci/.fixpackrc.json || true && fixpack --config ci/.fixpackrc.json || true"
    },
    "compile:package": {
      "dependencies": [
        "compile:package:install",
        "compile:package:run"
      ],
      "files": [
        "./src/packages/**/*.jsonc"
      ]
    },
    "compile:package:install": {
      "dependencies": [
        "compile:fixpack"
      ],
      "command": "npm install"
    },
    "compile:package:run": {
      "command": "node ./src/packages/generate-package.ts"
    }
  }
}
