{{- $post := . -}}
{{- $posttype := partialCached "func/getType.html" . -}}
{{- $config := partialCached "func/getPostSetup.html" $posttype -}}

{{- $articleclasses := partials.IncludeCached "func/getArticleClasses.html" $post $post -}}
<article class="{{- $articleclasses -}}">
  {{- partial "template-note" (dict "note" "post.html") -}}

  {{- if ne $config.status false -}}
    {{- partials.IncludeCached "content/components/status.html" $post $post -}}
  {{- end -}}

  {{- if ne $config.banner false -}}
    {{- partials.Include "content/components/banner.html" $post -}}
  {{- end -}}

  {{- if ne $config.headline false -}}
    {{- partials.Include "content/components/headline.html" $post -}}
  {{- end -}}

  {{- if ne $config.bannerheadline false -}}
    {{- partials.Include "content/components/headline-banner.html" $post -}}
  {{- end -}}

  <div class="prose">
    {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-before" "context" $post ) -}}
    {{- $post.Content -}}
    {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-after" "context" $post ) -}}

    <div class="section--comments">
      {{- partials.IncludeCached "content/components/comment-form.html" $post $post -}}
    </div>

    {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-meta-before" "context" $post ) -}}
    {{- if ne $config.meta false -}}
      {{ partialCached "content/components/meta.html" $post -}}
    {{- end -}}
    {{- partials.Include "func/hook.html" ( collections.Dictionary "hook" "post-meta-after" "context" $post ) -}}

    {{- if ne $config.related false -}}
      {{- partials.IncludeCached "content/sections/related.html" $post $post.Params.tags -}}
    {{- end -}}

  </div>
</article>
