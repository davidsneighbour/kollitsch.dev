[csp]
reportOnly = false
reportUri = "https://kollitschdev.report-uri.com/r/d/csp/reportOnly"

#require-trusted-types-for = ["'script'"]
upgradeInsecureRequests = true
#require-trusted-types-for = ["'script'"]
base-uri = ["'self'"]
defaultSrc = ["'none'"]
script-src = [
  "'self'",
  "'unsafe-eval'",
  "'unsafe-inline'",
  #"'strict-dynamic'",
  "https://d33wubrfki0l68.cloudfront.net",
  "https://giscus.app/",
  'https://unpkg.com',
  "https://identity.netlify.com",
  "'nonce-dnb-components-sw'",
  "static.cloudflareinsights.com"
]
style-src = [
  "'self'",
  "'unsafe-inline'",
  "https://d33wubrfki0l68.cloudfront.net",
  "https://giscus.app/"
]
img-src = [
  "'self'",
  "https://d33wubrfki0l68.cloudfront.net",
  "data:",
  "https://i.ytimg.com",
]
font-src = ["'self'", "https://d33wubrfki0l68.cloudfront.net"]
connect-src = ["'self'", "https://api.github.com/", 'cloudflareinsights.com']
media-src = ["'self'"]
object-src = ["'none'"]
child-src = ["'self'"]
frame-src = [
  "'self'",
  "https://giscus.app/",
  "https://www.youtube-nocookie.com",
]
worker-src = ["'self'"]
form-action = ["'self'", "https://formspree.io/f/xoqyzooe"]
manifest-src = ["'self'"]

[[redirects]]
netlify = "https://kollitsch-dev.netlify.app/"

# redirect main sections to home page
# this should correspond to mainSections in config/_default/params/mainSections
[[redirects]]
from = "/blog/"
to = "/"
status = "301"
# END redirect main sections to home page

[[redirects]]
from = "/repos/*"
to = "https://kollitsch.dev/"
status = "301"

[[redirects]]
from = "/2005/*"
to = "https://kollitsch.dev/"
status = "301"

[[redirects]]
from = "/2006/*"
to = "https://kollitsch.dev/"
status = "301"

[[redirects]]
from = "/2007/*"
to = "https://kollitsch.dev/"
status = "301"

[[redirects]]
from = "/2008/*"
to = "https://kollitsch.dev/"
status = "301"

[[redirects]]
from = "/tags/kollitsch.de/"
to = "https://kollitsch.dev/tags/davidsneighbour/"
status = "301"

[[redirects]]
from = "/tags/dnb/"
to = "https://kollitsch.dev/tags/davidsneighbour/"
status = "301"

[[redirects]]
from = "/tags/dnb-org/"
to = "https://kollitsch.dev/tags/davidsneighbour/"
status = "301"

[[redirects]]
from = "/repos/textpattern-plugins/current/"
to = "https://kollitsch.dev/"
status = "301"

[[redirects]]
from = "/dnb/*"
to = "https://kollitsch.dev/"
status = "301"

[[redirects]]
from = "/repos/textpattern-plugins/current/"
to = "https://kollitsch.dev/"
status = "301"
